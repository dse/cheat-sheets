# The getopts builtin

## Shell Variables

The following variables are set by the shell:

-   `OPTARG`

    The value of the last option argument processed by the `getopts`
    builtin command (see SHELL BUILTIN COMMANDS below).
              
-   `OPTIND`
       
    The index of the next argument to be processed by the `getopts`
    builtin command (see SHELL BUILTIN COMMANDS below).

The following variables are used by the shell.  In some cases, bash
assigns a default value to a variable; these cases are noted below.

-   OPTERR

    If set to the value 1, bash displays error messages generated by
    the `getopts` builtin command (see SHELL BUILTIN COMMANDS below).
    `OPTERR` is initialized to 1 each time the shell is invoked or a
    shell script is executed.

## The Builtin

-   getopts _optstring_ _name_ [_arg_ ...]

`getopts` is used by shell procedures to parse positional
parameters.

### _optstring_

_optstring_ contains the option characters to be recognized; if a
character is followed by a colon, the option is expected to have
an argument, which should be separated from it by white space.

The colon and question mark characters may not be used as option
characters.

### _name_

Each time it is invoked, `getopts` places the next option in the
shell variable `name`, initializing `name` if it does not exist,

### `OPTIND`

and the index of the next argument to be processed into the
variable `OPTIND`.  `OPTIND` is initialized to 1 each time the
shell or a shell script is invoked.

The shell does not reset `OPTIND` automatically; it must be manually
reset between multiple calls to `getopts` within the same shell
invocation if a new set of parameters is to be used.

#### End of Options

When the end of options is encountered, `getopts` exits with a
return value greater than zero.  `OPTIND` is set to the index of
the first non-option argument, and _name_ is set to `?`.

### `OPTARG`

When an option requires an argument, `getopts` places that argument
into the variable `OPTARG`.

### Parameters

`getopts` normally parses the positional parameters, but if more
arguments are supplied as arg values, `getopts` parses those
instead.

### Error Reporting

`getopts` can report errors in two ways.

If the first character of _optstring_ is a colon, silent error
reporting is used.

In normal operation, diagnostic messages are printed when invalid
options or missing option arguments are encountered.

If the variable `OPTERR` is set to 0, no error messages will be
displayed, even if the first character of _optstring_ is not a colon.

### Invalid Option

If an invalid option is seen, `getopts` places `?`  into _name_
and,

if not silent, prints an error message and unsets `OPTARG`.

If `getopts` is silent, the option character found is placed in
`OPTARG` and no diagnostic message is printed.

### Required Argument Missing

If a required argument is not found, and `getopts` is not silent, a
question mark (`?`) is placed in _name_, `OPTARG` is unset, and a
diagnostic message is printed.

If `getopts` is silent, then a colon (:) is placed in _name_ and
`OPTARG` is set to the option character found.

### Return Value

`getopts` returns true if an option, specified or unspecified, is
found.  It returns false if the end of options is encountered or
an error occurs.

